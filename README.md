## Телеграм бот для поиска информации о музыкальном произведении

## Функционал:

- Получение отрывка песни по названию и/или исполнителю

- Получение ссылки на трек/альбом в Apple Music по названию и/или исполнителю

- Профиль пользователя

## Некоторые детали:

- Бот работает асинхронно

- В профиле пользователь может узнать количество своих запросов на поиск музыкального произведения, при каждом запросе информации о песне от пользователя в базе данных количество поисков увеличивается на 1

- Каждый пользователь хранится в локальной базе данных, реализовано с помощью asyncpg

- Администратор может посмотреть статистику по боту: количество пользователей и общее количество запросов за время существования базы данных

- Бот использует api shazam, получает ссылку на трек/альбом или скачивает отрывок трека, сохраняет временный .m4a файл в директорию audio и отправляет его пользователю, затем удаляет этот файл

- Основная таблица users базы данных состоит из столбцов id (автоинкремент, внутренний айди пользователя), tg_id (телеграм айди пользователя), first_name (Имя пользователя), last_name (Фамилия пользователя) и n_searches (количество поисков)

### Создание таблицы users

```
CREATE TABLE users(
    id serial PRIMARY KEY,
    tg_id bigint NOT NULL,
    first_name varchar(50) NOT NULL,
    last_name varchar(50),
    n_searches integer NOT NULL);
```

## config.py

```
connect_data = 'postgresql://username:password@host:port/database'
admins_ids = []
BOT_TOKEN = ''
```
- connect_data - данные для подключения к базе данных: юзернейм, пароль, хост, порт, название базы данных
- admins_ids - телеграм айди администраторов, требуется для доступа к команде для получения статистики бота
BOT_TOKEN - токен бота, полученный у @BotFather


## Пример работы бота:

![alt text](image.png)

![alt text](image-1.png)